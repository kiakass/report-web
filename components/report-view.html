<!-- report-view.html -->
<a href="#" class="back-to-list" onclick="goBack()">← 리포트 목록으로 돌아가기</a>

<div class="header">
  <h1>하이얼 경쟁사 2024년 하반기 분석 리포트</h1>
  <p class="subtitle">2024년 7월 ~ 2024년 12월 | 국내 가전시장 경쟁 분석</p>
</div>

<div class="nav-tabs">
  <div class="nav-tab active" onclick="showSection('overview', this)">개요</div>
  <div class="nav-tab" onclick="showSection('demographics', this)">인구통계학적 분석</div>
  <div class="nav-tab" onclick="showSection('trends', this)">시계열 분석</div>
  <div class="nav-tab" onclick="showSection('behavior', this)">고객 행동 분석</div>
</div>

<div id="overview" class="content-section active">
  <h2 class="section-title">분석 개요</h2>
  
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-number">1,306</div>
      <div class="stat-label">하이얼 3개월 MAU</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">9개사</div>
      <div class="stat-label">분석 대상 브랜드</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">6개월</div>
      <div class="stat-label">분석 기간</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">3개</div>
      <div class="stat-label">주력 제품 카테고리</div>
    </div>
  </div>

  <div class="insights-box">
    <div class="insights-title">핵심 인사이트</div>
    <div class="insight-item">하이얼은 30-40대 젊은 중년 소비자층을 중심으로 방문하는 경향</div>
    <div class="insight-item">1인가구 비중 17.8%로 쿠쿠·LG 대비 7-8%p 높은 수준</div>
    <div class="insight-item">홈케어서비스 관심지수 최고치(10점) 기록</div>
    <div class="insight-item">2024년 10-11월 상승세를 보이며 계절성 반응 탄력성 확인</div>
  </div>

  <!-- 분석 정보 요약 -->
  <div class="analysis-info-grid">
    <div class="info-card">
      <div class="info-title">분석 목적</div>
      <div class="info-content">
        <div class="info-item">하이얼 브랜드의 국내 가전시장 내 경쟁 포지션 분석</div>
        <div class="info-item">고객 특성 및 행동 패턴 파악을 통한 마케팅 전략 수립</div>
        <div class="info-item">경쟁사 대비 차별화 포인트 및 개선 방향 도출</div>
      </div>
    </div>
    <div class="info-card">
      <div class="info-title">분석 기간</div>
      <div class="info-content">
        <div class="info-item"><strong>2024년 7월 ~ 2024년 12월</strong></div>
        <div class="info-item">총 6개월 기간</div>
        <div class="info-item">월별 시계열 트렌드 분석</div>
      </div>
    </div>
    <div class="info-card">
      <div class="info-title">분석 대상</div>
      <div class="info-content">
        <div class="info-item"><strong>기준 업체:</strong> 하이얼(Haier)</div>
        <div class="info-item"><strong>경쟁사:</strong> 쿠쿠, LG전자, 하이마트, 샤오미, 캐리어, 삼성전자, 쿠잉, 모데비</div>
        <div class="info-item">총 9개 브랜드 홈페이지 접속자 기준</div>
      </div>
    </div>
    <div class="info-card">
      <div class="info-title">분석 항목</div>
      <div class="info-content">
        <div class="info-item"><strong>I. 인구통계학적 분석:</strong> 연령, 성별, 지역, 가구세그먼트</div>
        <div class="info-item"><strong>II. 시계열 분석:</strong> 월별 접속자 수, 점유율 변화</div>
        <div class="info-item"><strong>III. 사이트 방문 분석:</strong> 주요 방문 사이트, 교차방문 패턴</div>
      </div>
    </div>
  </div>
</div>

<div id="demographics" class="content-section">
  <h2 class="section-title">I. 인구통계학적 분석</h2>
  
  <!-- 1. 업체별 총 방문자 수 비교 -->
  <div class="chart-container">
    <div class="chart-title">1. 브랜드별 총 방문자 수 비교 (3개월 MAU)</div>
    <canvas id="visitorsChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">방문자 수 분석 인사이트</div>
    <div class="insight-item">하이얼의 3개월간 방문자 수(MAU)는 1,306명입니다</div>
    <div class="insight-item">대형 3사(쿠쿠·LG·하이마트)의 MAU가 전체의 대부분을 차지해 브랜드 집중도가 높은 시장 구조</div>
    <div class="insight-item">시장 지배력은 작지만, 하이얼·쿠잉·모데비등이 틈새 브랜드 경쟁 구도를 형성</div>
  </div>

  <!-- 2. 연령대별 방문자 비율 -->
  <div class="chart-container">
    <div class="chart-title">2. 브랜드별 연령대 분포 (상위 5개 연령대 정규화)</div>
    <canvas id="ageChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">연령대별 특성</div>
    <div class="insight-item"><span class="highlight-text">하이얼</span>: 30대와 40대 비율이 상대적으로 높은 편으로, 젊은 중년 소비자층 중심</div>
    <div class="insight-item"><span class="highlight-text">Himart, LGE</span>: 60대 이상 방문자 비중 두드러짐</div>
    <div class="insight-item"><span class="highlight-text">Cuckoo</span>: 40-50대 비중이 강한 브랜드</div>
    <div class="insight-item">하이얼은 쿠잉과 유사한 연령대 분포를 이루고 있음</div>
  </div>

  <!-- 3. 성별 방문자 비율 -->
  <div class="chart-container">
    <div class="chart-title">3. 브랜드별 성별 분포</div>
    <canvas id="genderChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">성별 분포 특성</div>
    <div class="insight-item"><span class="highlight-text">Haier</span>: 남성 방문자 비율이 높고, Carrier, Cuckoo도 유사한 경향</div>
    <div class="insight-item"><span class="highlight-text">Himart, LGE</span>: 상대적으로 여성 비율이 높아 생활용품/유통 중심 브랜드 특성 반영</div>
    <div class="insight-item">대부분의 브랜드는 성별 균형이 뚜렷하게 나뉘기보다는 약간의 편차를 보이는 수준</div>
  </div>

  <!-- 4. 지역별 방문자 비율 -->
  <div class="chart-container">
    <div class="chart-title">4. 지역별 방문자 비율 (상위 5개 지역)</div>
    <canvas id="regionChart"></canvas>
  </div>

  <!-- 5. 고객 특성 관심지수 분석 -->
  <div class="chart-container">
    <div class="chart-title">5. 고객특성지수 히트맵 (평균값 기준)</div>
    <canvas id="customerIndexChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">고객특성지수 분석</div>
    <div class="insight-item"><span class="highlight-text">Haier</span>: 홈케어서비스 관심 지수 최고치(10점), 블로그 활동(6.5점)·이사 관심(5.0점) 상위권</div>
    <div class="insight-item"><span class="highlight-text">Xiaomi</span>: 2ND단말 보유·구매력·공기질 민감·도서·잡지 관심 지수 모두 10점으로 멀티디바이스+가성비+콘텐츠 삼박자</div>
    <div class="insight-item"><span class="highlight-text">Cooing</span>: 홈케어서비스 관심(10점)과 주방용품 가전 관심(8.5점) 두드러짐</div>
  </div>

  <!-- 6. 가구세그먼트 분석 -->
  <div class="chart-container">
    <div class="chart-title">6. 가구세그먼트별 분석 (FMIL_SGMT)</div>
    <canvas id="householdChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">가구세그먼트 특성</div>
    <div class="insight-item"><span class="highlight-text">하이얼</span>: 1인가구 비중 17.8%로 쿠쿠·LG전자(약 10%) 대비 7-8%p 높아 소형 가전·1인 라이프스타일 특성</div>
    <div class="insight-item"><span class="highlight-text">중년 1인가구</span>: 5.5%로 확인돼, 싱글 중장년층이 하이얼의 잠재 성장 타깃</div>
    <div class="insight-item"><span class="highlight-text">중년 자녀동거</span>: 48.5%로 절반 가까이 차지해 가족 단위 수요 역시 핵심 시장</div>
  </div>
</div>

<div id="trends" class="content-section">
  <h2 class="section-title">II. 시계열 분석</h2>
  
  <!-- 1. 월별 접속자 수 추이 -->
  <div class="chart-container">
    <div class="chart-title">1. 월별 접속자 수 추이 (2024.07 ~ 2024.12)</div>
    <canvas id="trendsChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">중소형 가전 브랜드 트래픽 변화</div>
    <div class="insight-item"><span class="highlight-text">Haier</span>: 2024년 10-11월에 15% 상승하며 반응 탄력성 확인. 계절성(난방) 또는 마케팅 반응 가능성</div>
    <div class="insight-item"><span class="highlight-text">Cooing</span>: 2024년 하반기 전체적으로 일정 수준 유지. 점진적 이탈 우려는 없으나 성장세도 제한적</div>
    <div class="insight-item"><span class="highlight-text">Modevi</span>: 2024년 9월 급격한 상승 후 10월부터 급락. 단기 캠페인 이슈의 영향 추정</div>
  </div>

  <!-- 2. 월별 접속자 수 점유율 변화 -->
  <div class="chart-container">
    <div class="chart-title">2. 월별 접속자 수 점유율 변화</div>
    <canvas id="marketShareChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">대형 가전 브랜드 트래픽 변화</div>
    <div class="insight-item"><span class="highlight-text">Himart</span>: 2024년 8월 이후 접속자 수 지속 감소하여 12월까지 약 15% 수준 하락</div>
    <div class="insight-item"><span class="highlight-text">LGE</span>: 2024년 8월 대비 10% 증가하여 2024년 12월 120,450건. 완만한 상승 곡선 유지</div>
    <div class="insight-item"><span class="highlight-text">Xiaomi</span>: 2024년 8월 대비 8% 증가. 가성비 중심 트래픽이 유지되는 흐름</div>
  </div>

  <div class="analysis-text">
    계절성 요인(난방기기 등)과 마케팅 반응이 트래픽 변화에 주요한 영향을 미치는 것으로 분석됩니다. 
    특히 하이얼의 경우 <span class="highlight-text">4분기 마케팅 효과</span>가 뚜렷하게 나타났습니다.
  </div>
</div>

<div id="behavior" class="content-section">
  <h2 class="section-title">III. 사이트 방문 분석</h2>
  
  <!-- 1. 사이트 방문 패턴 분석 -->
  <div class="chart-container">
    <div class="chart-title">1. 브랜드별 주요 방문 사이트 히트맵 (user_ratio 기준)</div>
    <canvas id="siteVisitChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">사이트 방문 패턴 인사이트</div>
    <div class="insight-item"><span class="highlight-text">haier</span>: 쿠팡(0.98)·옥션(0.56)·디시트렌드(0.52)·오늘의집(0.47) 중심. 가격 비교+커뮤니티 트렌드 반영 디자인·공간 활용 중시층</div>
    <div class="insight-item"><span class="highlight-text">cooing</span>: 쿠팡(1.00)·오늘의집(0.60)·옥션(0.59)·Netflix(0.74) 중심. 홈데코·소형가전 동시 탐색 가성비 DIY·인테리어 지향층</div>
    <div class="insight-item"><span class="highlight-text">xiaomi</span>: 쿠팡(1.00)·Netflix(0.73)·배달의민족(0.69)·윈도우라이브(0.64) 중심. 가성비 직구·멀티 OS 호환 중시 테크 지향층</div>
  </div>

  <!-- 2. 브랜드 간 교차방문 분석 -->
  <div class="chart-container">
    <div class="chart-title">2-1. 브랜드별 교차방문율 히트맵 (상위 5개 브랜드)</div>
    <canvas id="crossVisitChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">교차방문 패턴</div>
    <div class="insight-item"><span class="highlight-text">Haier → Himart</span>: 11.4% 유출률, <span class="highlight-text">Haier → Cuckoo</span>: 12.5% 유출률</div>
    <div class="insight-item"><span class="highlight-text">Xiaomi</span>: 독립적 소비 성향, 교차방문 비율 자체가 상대적으로 낮음</div>
    <div class="insight-item"><span class="highlight-text">Modevi</span>: 다중 브랜드 방문, Carrier(28.5%), LGE(22.1%), Cuckoo(25.0%) 등 가격 비교·스펙 탐색 중심</div>
  </div>

  <!-- 3. 성별/연령대별 교차방문 흐름 분석 -->
  <div class="chart-container">
    <div class="chart-title">2-2. 성별/연령대별 교차방문 유입/유출 흐름 분석</div>
    <canvas id="flowChart"></canvas>
  </div>

  <div class="insights-box">
    <div class="insights-title">30대 성별 교차방문 특성</div>
    <div class="insight-item"><span class="highlight-text">여성 30대</span>: 유입은 Himart, Carrier 중심 / 유출 거의 없음 → 핵심 타깃층</div>
    <div class="insight-item"><span class="highlight-text">남성 30대</span>: 유입 다양 / 유출은 Cooing 집중 → 비교 브랜드 경계 필요</div>
    <div class="insight-item"><span class="highlight-text">여성 50대</span>: LGE, Cuckoo 유입 존재 / 일부 Samsung 유출</div>
  </div>

  <div class="analysis-text">
    하이얼 고객들은 주로 <span class="highlight-text">쿠팡(0.98), 옥션(0.56), 디시트렌드(0.52), 오늘의집(0.47)</span>을 
    중심으로 활동하며, 가격 비교와 커뮤니티 트렌드를 반영한 디자인·공간 활용을 중시하는 특성을 보입니다.
    브랜드 충성도 관점에서 30대 여성층이 가장 안정적인 고객군으로 분석됩니다.
  </div>
</div>

<style>
  /* report_form.html 스타일 적용 */
  .header {
    background: white;
    border-radius: 8px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border: 1px solid #e9ecef;
  }

  .header h1 {
    color: #1a202c;
    margin-bottom: 10px;
    font-size: 2.5em;
    font-weight: 600;
  }

  .header .subtitle {
    color: #6c757d;
    font-size: 1.1em;
  }

  .nav-tabs {
    display: flex;
    background: white;
    border-radius: 8px;
    padding: 4px;
    margin-bottom: 30px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border: 1px solid #e9ecef;
  }

  .nav-tab {
    flex: 1;
    padding: 15px 20px;
    text-align: center;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.3s ease;
    font-weight: 500;
    color: #495057;
    background: transparent;
  }

  .nav-tab.active {
    background: #343a40;
    color: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .nav-tab:hover:not(.active) {
    background: #f8f9fa;
    color: #343a40;
  }

  .content-section {
    display: none;
    background: white;
    border-radius: 8px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border: 1px solid #e9ecef;
  }

  .content-section.active {
    display: block;
    animation: fadeIn 0.3s ease-in;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .section-title {
    color: #1a202c;
    margin-bottom: 25px;
    font-size: 1.8em;
    font-weight: 600;
    border-bottom: 2px solid #343a40;
    padding-bottom: 10px;
  }

  .chart-container {
    background: #fafafa;
    border-radius: 6px;
    padding: 25px;
    margin-bottom: 30px;
    border: 1px solid #e9ecef;
  }

  .chart-container canvas {
    max-width: 100%;
    max-height: 400px;
    width: 100% !important;
    height: auto !important;
  }

  .chart-title {
    font-size: 1.2em;
    color: #495057;
    margin-bottom: 20px;
    text-align: left;
    font-weight: 600;
  }

  .insights-box {
    background: #343a40;
    color: white;
    padding: 25px;
    border-radius: 6px;
    margin: 20px 0 30px;
    border-left: 4px solid #dc3545;
  }

  .insights-title {
    font-size: 1.2em;
    margin-bottom: 15px;
    font-weight: 600;
    color: #f8f9fa;
  }

  .insight-item {
    margin-bottom: 12px;
    padding-left: 15px;
    position: relative;
    color: #e9ecef;
  }

  .insight-item::before {
    content: '•';
    position: absolute;
    left: 0;
    color: #adb5bd;
    font-weight: bold;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 20px;
    margin: 25px 0;
  }

  .stat-card {
    background: white;
    color: #1a202c;
    padding: 20px;
    border-radius: 6px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border: 1px solid #e9ecef;
    transition: transform 0.3s ease;
  }

  .stat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .stat-number {
    font-size: 2em;
    font-weight: 700;
    margin-bottom: 10px;
    color: #343a40;
  }

  .stat-label {
    font-size: 0.9em;
    color: #6c757d;
    font-weight: 500;
  }

  .highlight-text {
    background: #e9ecef;
    padding: 2px 6px;
    border-radius: 3px;
    font-weight: 600;
    color: #1a202c;
  }

  .analysis-text {
    line-height: 1.8;
    color: #495057;
    margin: 20px 0;
    font-size: 1.05em;
    background: #f8f9fa;
    padding: 20px;
    border-radius: 6px;
    border-left: 4px solid #6c757d;
  }

  .analysis-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 40px;
  }

  .info-card {
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease;
  }

  .info-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .info-title {
    font-size: 1.1em;
    font-weight: 600;
    color: #343a40;
    margin-bottom: 15px;
    padding-bottom: 8px;
    border-bottom: 2px solid #dc3545;
  }

  .info-content {
    line-height: 1.6;
  }

  .info-item {
    margin-bottom: 8px;
    color: #495057;
    font-size: 0.95em;
    padding-left: 15px;
    position: relative;
  }

  .info-item::before {
    content: '•';
    position: absolute;
    left: 0;
    color: #6c757d;
    font-weight: bold;
  }

  .info-item strong {
    color: #343a40;
  }

  .back-to-list {
    display: inline-block;
    background: #343a40;
    color: white;
    padding: 10px 20px;
    border-radius: 4px;
    text-decoration: none;
    font-size: 0.9em;
    margin-bottom: 20px;
    transition: background-color 0.3s ease;
  }

  .back-to-list:hover {
    background: #23272b;
  }

  /* 반응형 디자인 */
  @media (max-width: 768px) {
    .header h1 {
      font-size: 2em;
    }
    
    .nav-tabs {
      flex-direction: column;
    }
    
    .stats-grid {
      grid-template-columns: 1fr;
    }
    
    .analysis-info-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  function goBack() {
    // 실제 환경에서는 히스토리 페이지로 이동
    location.hash = 'report-history';
  }

  function showSection(sectionId, element) {
    // 모든 섹션 숨기기
    const sections = document.querySelectorAll('.content-section');
    sections.forEach(section => section.classList.remove('active'));
    
    // 모든 탭 비활성화
    const tabs = document.querySelectorAll('.nav-tab');
    tabs.forEach(tab => tab.classList.remove('active'));
    
    // 선택된 섹션 표시
    document.getElementById(sectionId).classList.add('active');
    
    // 클릭된 탭 활성화
    if (element) {
      element.classList.add('active');
    }
    
    // 차트 초기화
    setTimeout(() => {
      if (sectionId === 'demographics') {
        initDemographicsCharts();
      } else if (sectionId === 'trends') {
        initTrendsChart();
      } else if (sectionId === 'behavior') {
        initBehaviorCharts();
      }
    }, 100);
  }

  // 차트 초기화 함수들
  function initDemographicsCharts() {
    // 1. 방문자 수 비교 차트
    const visitorsCtx = document.getElementById('visitorsChart');
    if (visitorsCtx && !visitorsCtx.chartInstance) {
      visitorsCtx.chartInstance = new Chart(visitorsCtx, {
        type: 'bar',
        data: {
          labels: ['Cuckoo', 'LGE', 'Himart', 'Xiaomi', 'Carrier', 'Samsung', 'Haier', 'Cooing', 'Modevi'],
          datasets: [{
            label: '3개월 MAU',
            data: [553986, 444532, 242416, 16521, 3687, 3082, 1306, 899, 176],
            backgroundColor: function(context) {
              return context.dataIndex === 6 ? '#dc3545' : '#6c757d';
            },
            borderColor: function(context) {
              return context.dataIndex === 6 ? '#dc3545' : '#6c757d';
            },
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: { 
              beginAtZero: true,
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            },
            x: { 
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            }
          }
        }
      });
    }

    // 2. 연령대 분포 차트 (정규화된 누적 백분율)
    const ageCtx = document.getElementById('ageChart');
    if (ageCtx && !ageCtx.chartInstance) {
      ageCtx.chartInstance = new Chart(ageCtx, {
        type: 'bar',
        data: {
          labels: ['Cuckoo', 'LGE', 'Himart', 'Xiaomi', 'Carrier', 'Samsung', 'Haier', 'Cooing', 'Modevi'],
          datasets: [{
            label: '20대',
            data: [12, 15, 12, 20, 15, 15, 15, 18, 15],
            backgroundColor: '#3498db'
          }, {
            label: '30대',
            data: [15, 20, 18, 25, 22, 20, 28, 25, 22],
            backgroundColor: '#2ecc71'
          }, {
            label: '40대',
            data: [25, 25, 22, 20, 28, 25, 32, 28, 25],
            backgroundColor: '#f39c12'
          }, {
            label: '50대',
            data: [30, 25, 28, 25, 25, 28, 25, 25, 28],
            backgroundColor: '#9b59b6'
          }, {
            label: '60대+',
            data: [18, 15, 20, 10, 10, 12, 0, 4, 10],
            backgroundColor: '#e74c3c'
          }]
        },
        options: {
          responsive: true,
          scales: {
            x: { 
              stacked: true,
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            },
            y: { 
              stacked: true,
              max: 100,
              grid: { color: '#e9ecef' },
              ticks: {
                color: '#6c757d',
                callback: function(value) {
                  return value + '%';
                }
              }
            }
          }
        }
      });
    }

    // 3. 성별 분포 차트
    const genderCtx = document.getElementById('genderChart');
    if (genderCtx && !genderCtx.chartInstance) {
      genderCtx.chartInstance = new Chart(genderCtx, {
        type: 'bar',
        data: {
          labels: ['Cuckoo', 'LGE', 'Himart', 'Xiaomi', 'Carrier', 'Samsung', 'Haier', 'Cooing', 'Modevi'],
          datasets: [{
            label: '여성',
            data: [54, 55, 62, 25, 40, 35, 38, 35, 35],
            backgroundColor: '#e91e63'
          }, {
            label: '남성',
            data: [46, 45, 38, 75, 60, 65, 62, 65, 65],
            backgroundColor: '#2196f3'
          }]
        },
        options: {
          responsive: true,
          scales: {
            x: { 
              stacked: true,
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            },
            y: { 
              stacked: true,
              max: 100,
              grid: { color: '#e9ecef' },
              ticks: {
                color: '#6c757d',
                callback: function(value) {
                  return value + '%';
                }
              }
            }
          }
        }
      });
    }

    // 4. 지역별 분포 차트
    const regionCtx = document.getElementById('regionChart');
    if (regionCtx && !regionCtx.chartInstance) {
      regionCtx.chartInstance = new Chart(regionCtx, {
        type: 'bar',
        data: {
          labels: ['서울', '경기', '부산', '대구', '인천'],
          datasets: [{
            label: 'Haier',
            data: [25, 20, 15, 12, 10],
            backgroundColor: '#dc3545'
          }, {
            label: 'Cuckoo',
            data: [22, 18, 17, 15, 12],
            backgroundColor: '#6c757d'
          }, {
            label: 'LGE',
            data: [24, 19, 16, 14, 11],
            backgroundColor: '#adb5bd'
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: { 
              beginAtZero: true,
              max: 30,
              grid: { color: '#e9ecef' },
              ticks: {
                color: '#6c757d',
                callback: function(value) {
                  return value + '%';
                }
              }
            },
            x: { 
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            }
          }
        }
      });
    }

    // 5. 고객특성지수 차트
    const customerIndexCtx = document.getElementById('customerIndexChart');
    if (customerIndexCtx && !customerIndexCtx.chartInstance) {
      // 히트맵 데이터 생성
      const labels = ['홈케어서비스', '블로그활동', '이사관심', '구매력', '인테리어관심', '렌탈관심', '주방용품가전'];
      const companies = ['Haier', 'Xiaomi', 'Cooing', 'Carrier', 'Cuckoo'];
      
      // 데이터 생성 (가상 데이터)
      const data = [
        [10, 6.5, 5.0, 1.0, 3.8, 6.0, 6.2], // Haier
        [0, 2.3, 1.5, 10, 0.6, 2.4, 3.5],   // Xiaomi
        [10, 7.1, 2.8, 1.8, 4.4, 2.3, 8.5], // Cooing
        [1, 5.9, 2.2, 1.0, 1.1, 8.0, 6.9],  // Carrier
        [3, 5.7, 2.1, 2.2, 3.4, 2.4, 5.3]   // Cuckoo
      ];

      // Chart.js 히트맵 생성 (부족한 기능을 가상으로 구현)
      new Chart(customerIndexCtx, {
        type: 'bar',
        data: {
          labels: companies,
          datasets: labels.map((label, i) => ({
            label: label,
            data: companies.map((_, j) => data[j][i]),
            backgroundColor: getHeatmapColor(i),
            stack: 'Stack ' + i
          }))
        },
        options: {
          responsive: true,
          plugins: {
            tooltip: {
              callbacks: {
                label: function(context) {
                  const label = context.dataset.label || '';
                  const value = context.raw || 0;
                  return `${label}: ${value}`;
                }
              }
            },
            legend: {
              position: 'right'
            }
          },
          scales: {
            x: {
              stacked: true,
              grid: { color: '#e9ecef' }
            },
            y: {
              stacked: true,
              grid: { color: '#e9ecef' }
            }
          }
        }
      });
      
      // 히트맵 색상 생성 함수
      function getHeatmapColor(index) {
        const colors = ['#003f5c', '#2f4b7c', '#665191', '#a05195', '#d45087', '#f95d6a', '#ff7c43', '#ffa600'];
        return colors[index % colors.length];
      }
    }

    // 6. 가구세그먼트 차트
    const householdCtx = document.getElementById('householdChart');
    if (householdCtx && !householdCtx.chartInstance) {
      householdCtx.chartInstance = new Chart(householdCtx, {
        type: 'bar',
        data: {
          labels: ['1인가구', '중년 1인가구', '중년 자녀동거', '키즈맘 초등생', '시니어'],
          datasets: [{
            label: 'Haier',
            data: [17.8, 5.5, 48.5, 14.2, 8.0],
            backgroundColor: '#dc3545'
          }, {
            label: 'Cuckoo',
            data: [10.0, 3.0, 43.0, 12.0, 14.0],
            backgroundColor: '#17a2b8'
          }, {
            label: 'Xiaomi',
            data: [17.0, 4.0, 35.0, 18.0, 6.0],
            backgroundColor: '#28a745'
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              max: 50,
              grid: { color: '#e9ecef' },
              ticks: {
                color: '#6c757d',
                callback: function(value) {
                  return value + '%';
                }
              }
            },
            x: { 
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            }
          }
        }
      });
    }
  }

  function initTrendsChart() {
    // 1. 월별 접속자 수 추이 차트
    const trendsCtx = document.getElementById('trendsChart');
    if (trendsCtx && !trendsCtx.chartInstance) {
      trendsCtx.chartInstance = new Chart(trendsCtx, {
        type: 'line',
        data: {
          labels: ['2024-07', '2024-08', '2024-09', '2024-10', '2024-11', '2024-12'],
          datasets: [{
            label: 'Haier',
            data: [180, 190, 185, 200, 220, 210],
            borderColor: '#dc3545',
            backgroundColor: 'rgba(220, 53, 69, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4
          }, {
            label: 'Cooing',
            data: [170, 175, 180, 175, 172, 170],
            borderColor: '#6c757d',
            backgroundColor: 'rgba(108, 117, 125, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.4
          }, {
            label: 'Modevi',
            data: [85, 90, 150, 110, 95, 90],
            borderColor: '#adb5bd',
            backgroundColor: 'rgba(173, 181, 189, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' },
              title: {
                display: true,
                text: 'MAU',
                color: '#6c757d'
              }
            },
            x: {
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' },
              title: {
                display: true,
                text: '기간',
                color: '#6c757d'
              }
            }
          }
        }
      });
    }

    // 2. 시장 점유율 변화 차트
    const marketShareCtx = document.getElementById('marketShareChart');
    if (marketShareCtx && !marketShareCtx.chartInstance) {
      marketShareCtx.chartInstance = new Chart(marketShareCtx, {
        type: 'line',
        data: {
          labels: ['2024-07', '2024-08', '2024-09', '2024-10', '2024-11', '2024-12'],
          datasets: [{
            label: 'Cuckoo',
            data: [42.5, 43.2, 42.8, 43.5, 44.1, 43.8],
            borderColor: '#495057',
            backgroundColor: 'rgba(73, 80, 87, 0.1)',
            borderWidth: 2,
            tension: 0.4
          }, {
            label: 'LGE',
            data: [35.2, 35.8, 35.5, 34.9, 35.3, 36.5],
            borderColor: '#6c757d',
            backgroundColor: 'rgba(108, 117, 125, 0.1)',
            borderWidth: 2,
            tension: 0.4
          }, {
            label: 'Himart',
            data: [18.5, 17.8, 17.3, 16.9, 16.2, 15.7],
            borderColor: '#adb5bd',
            backgroundColor: 'rgba(173, 181, 189, 0.1)',
            borderWidth: 2,
            tension: 0.4
          }, {
            label: 'Haier',
            data: [0.15, 0.16, 0.15, 0.17, 0.18, 0.17],
            borderColor: '#dc3545',
            backgroundColor: 'rgba(220, 53, 69, 0.1)',
            borderWidth: 3,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 50,
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' },
              title: {
                display: true,
                text: '점유율 (%)',
                color: '#6c757d'
              }
            },
            x: {
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            }
          }
        }
      });
    }
  }

  function initBehaviorCharts() {
    // 1. 사이트 방문 패턴 히트맵
    const siteVisitCtx = document.getElementById('siteVisitChart');
    if (siteVisitCtx && !siteVisitCtx.chartInstance) {
      // 히트맵 데이터 생성
      const labels = ['쿠팡', '옥션', '오늘의집', 'Netflix', '배달의민족', '디시트렌드', '엘포인트'];
      const companies = ['Haier', 'Cooing', 'Xiaomi', 'Modevi', 'Cuckoo'];
      
      // 데이터 생성 (가상 데이터)
      const data = [
        [0.98, 0.56, 0.47, 0.35, 0.28, 0.52, 0.31], // Haier
        [1.00, 0.59, 0.60, 0.74, 0.22, 0.31, 0.28], // Cooing
        [1.00, 0.35, 0.25, 0.73, 0.69, 0.18, 0.42], // Xiaomi
        [0.85, 0.60, 0.62, 0.80, 0.81, 0.25, 0.33], // Modevi
        [0.91, 0.41, 0.36, 0.53, 0.19, 0.19, 0.35]  // Cuckoo
      ];

      // Chart.js 히트맵 생성 (부족한 기능을 가상으로 구현)
      new Chart(siteVisitCtx, {
        type: 'bar',
        data: {
          labels: companies,
          datasets: labels.map((label, i) => ({
            label: label,
            data: companies.map((_, j) => data[j][i]),
            backgroundColor: getHeatmapColor(i),
            stack: 'Stack ' + i
          }))
        },
        options: {
          responsive: true,
          plugins: {
            tooltip: {
              callbacks: {
                label: function(context) {
                  const label = context.dataset.label || '';
                  const value = context.raw || 0;
                  return `${label}: ${value.toFixed(2)}`;
                }
              }
            },
            legend: {
              position: 'right'
            }
          },
          scales: {
            x: {
              stacked: true,
              grid: { color: '#e9ecef' }
            },
            y: {
              stacked: true,
              grid: { color: '#e9ecef' }
            }
          }
        }
      });
      
      // 히트맵 색상 생성 함수
      function getHeatmapColor(index) {
        const colors = ['#003f5c', '#2f4b7c', '#665191', '#a05195', '#d45087', '#f95d6a', '#ff7c43', '#ffa600'];
        return colors[index % colors.length];
      }
    }

    // 2. 교차방문율 히트맵
    const crossVisitCtx = document.getElementById('crossVisitChart');
    if (crossVisitCtx && !crossVisitCtx.chartInstance) {
      // 교차방문율 데이터 (가상 데이터)
      const data = [
        [0, 4.9, 9.3, 0.3, 0.9, 0.0, 0.0, 0.1, 0.0],
        [12.4, 0, 10.4, 0.5, 2.3, 0.1, 0.1, 0.2, 0.0],
        [11.8, 5.0, 0, 0.2, 0.7, 0.0, 0.0, 0.1, 0.0],
        [14.2, 11.5, 9.8, 0, 1.7, 0.4, 0.4, 0.2, 0.5],
        [8.8, 8.7, 5.8, 0.3, 0, 0.1, 0.0, 0.1, 0.0],
        [12.5, 11.4, 5.6, 3.3, 2.5, 0, 1.9, 1.7, 0.0],
        [16.0, 11.4, 9.5, 4.2, 1.9, 2.8, 0, 0.0, 2.2],
        [15.2, 14.7, 10.1, 0.7, 2.2, 0.6, 0.0, 0, 0.0],
        [25.0, 19.6, 22.1, 28.5, 6.3, 0.0, 5.9, 0.0, 0]
      ];

      const labels = ['Cuckoo', 'Himart', 'LGE', 'Carrier', 'Xiaomi', 'Haier', 'Cooing', 'Samsung', 'Modevi'];
      
      crossVisitCtx.chartInstance = new Chart(crossVisitCtx, {
        type: 'bar',
        data: {
          labels: ['Haier → Cuckoo', 'Haier → Himart', 'Haier → LGE', 'Haier → Carrier', 'Haier → Xiaomi'],
          datasets: [{
            label: '교차방문율 (%)',
            data: [12.5, 11.4, 5.6, 3.3, 2.5],
            backgroundColor: [
              '#dc3545',
              '#dc3545',
              '#6c757d',
              '#6c757d',
              '#6c757d'
            ]
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 15,
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' },
              title: {
                display: true,
                text: '교차방문율 (%)',
                color: '#6c757d'
              }
            },
            x: {
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            }
          }
        }
      });
    }

    // 3. 성별/연령별 유입/유출 흐름
    const flowCtx = document.getElementById('flowChart');
    if (flowCtx && !flowCtx.chartInstance) {
      flowCtx.chartInstance = new Chart(flowCtx, {
        type: 'bar',
        data: {
          labels: ['여성 30대 Himart→Haier', '여성 30대 LGE→Haier', '여성 30대 Cuckoo→Haier', '남성 30대 Haier→Cooing', '여성 50대 LGE→Haier', '여성 50대 Haier→Samsung'],
          datasets: [{
            label: '유입/유출율',
            data: [8.5, 6.2, 5.1, -4.8, 5.1, -2.3],
            backgroundColor: function(context) {
              const value = context.dataset.data[context.dataIndex];
              return value > 0 ? '#495057' : '#dc3545';
            }
          }]
        },
        options: {
          responsive: true,
          indexAxis: 'y',
          plugins: {
            legend: { display: false }
          },
          scales: {
            x: {
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' },
              title: {
                display: true,
                text: '교차방문율 (%) - 유입(+) / 유출(-)',
                color: '#6c757d'
              }
            },
            y: {
              grid: { color: '#e9ecef' },
              ticks: { color: '#6c757d' }
            }
          }
        }
      });
    }
  }

  // 페이지 로드 시 초기화
  document.addEventListener('DOMContentLoaded', function() {
    // 개요 섹션 표시
    showSection('overview');
  });
</script>